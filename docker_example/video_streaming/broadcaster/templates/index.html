<!DOCTYPE html>
<html lang="zxx" class="no-js">
<head>
	<!-- Mobile Specific Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Author Meta -->
	<meta name="author" content="CodePixar">
	<!-- Meta Description -->
	<meta name="description" content="">
	<!-- Meta Keyword -->
	<meta name="keywords" content="">
	<!-- meta character set -->
	<meta charset="UTF-8">
	<!-- Site Title -->
	<title>Pertamina Safety Intelligent</title>

	<link href="https://fonts.googleapis.com/css?family=Poppins:300,500,600" rel="stylesheet">
		<!--
		CSS
		============================================= -->
		<link rel="stylesheet" href="{{ url_for('static', filename='css/linearicons.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='css/owl.carousel.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='css/font-awesome.min.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='css/nice-select.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='css/magnific-popup.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
	</head>
	<body>
		<div class="main-wrapper-first">
			<header>
				<div class="container">
					<div class="header-wrap">
						<div class="header-top d-flex justify-content-between align-items-center">
							<div class="logo">
								<a href="index.html"><img src="{{url_for('static', filename='img/logo.png')}}" alt=""></a>
							</div>
							<div class="main-menubar d-flex align-items-center">
								<nav class="hide">
									<a href="index.html">Home</a>
								</nav>
								<div class="menu-bar"><span class="lnr lnr-menu"></span></div>
							</div>
						</div>
					</div>
				</div>
			</header>
		</div>
		<div class="main-wrapper">
			<div class="active-banner-slider">
				<div class="item d-flex align-items-center">
					<div class="container">
						<div class="content">
							<h1 class="text-white text-uppercase">Intelligent Vision Based <br> Safety analysis </h1>
							<p class="text-white">PT. Pertamina Persero <br> Unit X, Balongan West Java</p>
						</div>
					</div>
				</div>
				<div class="item d-flex align-items-center">
					<div class="container">
						<div class="content">
						</div>
					</div>
				</div>
				<div class="item d-flex align-items-center">
					<div class="container">
						<div class="content">
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="main-wrapper">
			<!-- Start Amazing Works Area -->
			<section class="amazing-works-area">
				<div class="container">
					<div class="row justify-content-center">
						<div class="col-lg-8">
							<div class="section-title text-center">
								<h3>Streaming Video</h3>
							</div>
						</div>
					</div>
					<div class="active-works-carousel mt-40">
						<!-- video result dashboards -->
						<div class="item">
							<!-- set the video position           -->
							<!-- the video is coming from socket  -->
							<div class="row">
								<div class="column">
									<img id='image1' alt="" style="width:80%">
								</div>
								<div class="column">
									<img id='image2' alt="" style="width:80%">
								</div>
							</div>
							<!-- importing socket for js           -->
							<!-- connect to server socket          -->
							<!-- send and get the data from server -->
							<script src='https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js'></script>
							<script>
								const socket = io.connect('http://192.168.31.200:8005');
								
								socket.on('connect', function() {
									socket.emit( 'url', {
										data: 'User Connected'
								}) })
					
								socket.on('video_frame', (image) =>{
									const imageElm1 = document.getElementById('image1');
									const imageElm2 = document.getElementById('image2');

									var obj = JSON.parse(image);
									// console.log(obj[0])

									for(var o in obj[0]) {
										imageElm1.src = obj[0][o];}

									for(var o in obj[1]) {
										imageElm2.src = obj[1][o];}

									// imageElm1.src = image;
									// imageElm2.src = image;
								})
					
							</script>
						</div >

						<!-- video url and name input form -->
						<div class='video-form'>
							<!-- user form                                 -->
							<!-- for registering or deleting the video url -->
							<div>
								Video Url:<br>
								<input type="text" class="form-control" id="videourl"><br>
								Video name:<br>
								<input type="text" class="form-control" id="videoname"><br><br>
								<button class="btn btn-primary" onclick="getAction()">Submit</button>
								<button class="btn btn-default">Delete</button>
								<!-- javascript logic                      -->
								<!-- for sending post request to the server-->
								<!-- <script language="JavaScript" type="text/javascript" src="/js/jquery-1.2.6.min.js">
									$(function() {
									    $('a#status').bind('click', function() {
										    $.getJSON('http://192.168.28.200:8005/add_video_url', {
										    video_url: $('input[name="video_url"]').val(),
										    video_name: $('input[name="video_name"]').val()
										    }, function(data) {
										    $("#result").text(data.result);
										    });
										return false;
									  });
									});
								</script> -->
								<p><span id=result>?</span>
							</div>

						</div>
						<!-- violation Image -->
						<div class="item">
							
						</div>
					</div>
				</div>
			</section>
			<!-- End live streming -->
			<!-- Start plotting area -->
			<div class="brand-area">
				<div class="container">
					<div class="total-brand d-flex justify-content-around">
						<img src="{{ url_for('static', filename='img/logo.png') }}" alt="">
						<img src="{{ url_for('static', filename='img/logo.png') }}" alt="">
						<img src="{{ url_for('static', filename='img/logo.png') }}" alt="">
					</div>
				</div>
			</div>
			<!-- Start Footer Widget Area -->
			<section class="footer-widget-area">
				<div class="container">
					<div class="row">
						<div class="col-md-4">
							<div class="single-widget d-flex flex-wrap justify-content-between">
								<div class="icon d-flex align-items-center justify-content-center">
									<span class="lnr lnr-pushpin"></span>
								</div>
								<div class="desc">
									<h6 class="title text-uppercase">Address</h6>
									<p>Jl Musholla no. 28, Kemang <br> South Jakarta <br> Indonesia </p>
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<div class="single-widget d-flex flex-wrap justify-content-between">
								<div class="icon d-flex align-items-center justify-content-center">
									<span class="lnr lnr-earth"></span>
								</div>
								<div class="desc">
									<h6 class="title text-uppercase">Email Address</h6>
									<div class="contact">
										<a href="mailto:fatchur.rahman1@gmail.com">fatchur.rahman1@gmail.com</a> <br>
										<a href="mailto:m_fatchur12u@app.ipb.ac.id">m_fatchur12u@app.ipb.ac.id</a>
									</div>
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<div class="single-widget d-flex flex-wrap justify-content-between">
								<div class="icon d-flex align-items-center justify-content-center">
									<span class="lnr lnr-phone"></span>
								</div>
								<div class="desc">
									<h6 class="title text-uppercase">Phone Number</h6>
									<div class="contact">
										<a href="tel:1545">0895 2794 2835</a> <br>
										<a href="tel:54512">-</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
			<!-- End Footer Widget Area -->

		</div>

		<script src="{{ url_for('static', filename='js/vendor/jquery-2.2.4.min.js') }}"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
		<script src="{{ url_for('static', filename='js/vendor/bootstrap.min.js') }}"></script>
		<script src="{{ url_for('static', filename='js/jquery.ajaxchimp.min.js') }}"></script>
		<script src="{{ url_for('static', filename='js/owl.carousel.min.js') }}"></script>
		<script src="{{ url_for('static', filename='js/jquery.nice-select.min.js') }}"></script>
		<script src="{{ url_for('static', filename='js/jquery.magnific-popup.min.js') }}"></script>
		<script src="{{ url_for('static', filename='js/main.js') }}"></script>

		<script>
			let videourl = '';
			let videoname = '';
			$('#videourl').on('input', function(){
				videourl = $(this).val();
			});
			$('#videoname').on('input', function(){
				videoname = $(this).val();
			});
			function getAction(){
				let videouUrl = document.getElementById('videourl');
				let body = {
					video_url: videourl,
					video_name: videoname,
				}
				$.ajax({
					type: "POST",
					url: "/add_video_url",
					data: JSON.stringify(body),
					contentType: "application/json; charset=utf-8",
					dataType: "json",
					success: function(data){console.log(data);},
					failure: function(errMsg) {
						alert(errMsg);
					}
				});
			}
			</script>
			
	</body>
</html>
